# 感受订阅发布模式

发布订阅模式，简单说很简单，就是一个数组的事。

在 vue 中，对 data 的引用可能不止一个，比如下面的 demo，用到了两次 data1 和 一次 data2

```html
<p id="p1">{{data1}}</p>
<p id="p2">{{data1}}</p>
<p id="p3">{{data2}}</p>
```

我们可以假定一个管理者维护了引用

```js
var dep1 = [p1, p2]
var dep2 = [p3]
```

如果我们能维护到这个相互依赖的状态，等到 `data1`的值发生变化，直接通知 `dep1`里所有的元素都重新渲染即可（全部重新渲染可能会性能低，后面也就移入了虚拟 DOM 方便进行比对，最小化渲染，这是后话）。

这里我们在用到 `data1`的地方触发一个行为，可以叫做添加订阅。

后面数据发生了变化会通知所有的引用，这个地方叫通知变化。

所以我们可以看到， 我们维护了两个 Dep
